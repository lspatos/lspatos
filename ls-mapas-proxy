export default {
  async fetch(request) {
    const url = new URL(request.url);
    const sheetUrl = 'https://script.google.com/macros/s/AKfycbwd0P5RCJrbolrpE4s5vIME9_IVED_35sRU827sRVMFCye8COSiQu4h3gOOWyTDwhCLJw/exec';

    // Redireciona todas as requisições ao Google Apps Script
    if (url.pathname.startsWith('/api')) {
      const targetUrl = sheetUrl + url.search;
      const response = await fetch(targetUrl, {
        method: request.method,
        headers: { 'Content-Type': 'application/json' },
      });
      return response;
    }

    return new Response('Proxy ativo: use /api?parametros...', { status: 200 });
  },
};
