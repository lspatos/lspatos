<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Envio de Respostas - LS Mapas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 { font-size: 22px; }
    form { display: flex; flex-direction: column; gap: 8px; width: 300px; }
    label { font-weight: bold; }
    input, select { padding: 6px; }
    button { padding: 6px; cursor: pointer; }
    #log { margin-top: 10px; font-size: 12px; color: #555; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Registro de Resposta</h1>
  <form id="formResposta">
    <label>Data e Hora: <input type="datetime-local" id="dataHora" required></label>
    <label>Status:
      <select id="status" required>
        <option value="">Selecione</option>
        <option>Em andamento</option>
        <option>Concluído</option>
        <option>Atrasado</option>
      </select>
    </label>
    <label>Setor: <input type="text" id="setor" required></label>
    <label>Endereço: <input type="text" id="endereco" required></label>
    <button type="submit">Enviar</button>
  </form>
  <div id="log"></div>

  <script>
    const workerURL = "https://ls-mapas-proxy.lspatosdeminas.workers.dev/";

    document.querySelector("#formResposta").addEventListener("submit", async e => {
      e.preventDefault();
      const body = {
        acao: "submit",
        dataHora: document.querySelector("#dataHora").value,
        status: document.querySelector("#status").value,
        setor: document.querySelector("#setor").value,
        endereco: document.querySelector("#endereco").value
      };
      const res = await fetch(workerURL, {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify(body)
      });
      const out = await res.json();
      log(JSON.stringify(out, null, 2));
      e.target.reset();
    });

    function log(msg) {
      document.querySelector("#log").textContent = msg;
      console.log(msg);
    }
  </script>
</body>
</html>
